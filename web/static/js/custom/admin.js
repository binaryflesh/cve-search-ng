function updateDB(){
  setStatus("Database update started", "info")
  $.getJSON('/admin/updatedb', {}, function(data){ parseStatus(data) })
  .fail(function() { parseStatus({"status": "auth_again"}); })
}
function changePass() {
  var pass1 = document.getElementById("new_pass").value;
  var pass2 = document.getElementById("repeat_pass").value;
  var ok = true;
  if (pass1 != pass2) {
    document.getElementById("new_pass").style.borderColor = "#E34234";
    document.getElementById("repeat_pass").style.borderColor = "#E34234";
  }else {
    data = {'new_pass':pass1, 'current_pass':document.getElementById("current_pass").value}
    $.getJSON('/admin/change_pass', data, function(data){ parseStatus(data) })
    .fail(function() { parseStatus({"status": "auth_again"}); })
  }
}
function requestToken() {
  $.getJSON('/admin/request_token', data, function(data){$("#token").val(data['token'])})
}
